---
title: "Drupalgeddon;  Are you ready?"
date: Wed Jul 13 2016 00:00:00 GMT+1200 (New Zealand Standard Time)
drupalNodeId: 266
---

    <p>Just arrived here?  <a href="https://www.js.geek.nz/blog/not-so-highly-critical">Read my followup first</a>.</p>
<h2>Original post</h2>
<p>The Drupal security team announced multiple highly critical updates to Drupal contrib modules in <a href="https://www.drupal.org/node/2764899">PSA-2016-001</a>.  <strong>Expect attacks</strong> within less than one hour from the announcement; 18 hours from the time this article is published.  This is probably going to be <a href="/blog/your-drupal-website-has-backdoor">Drupalgeddon</a> all over again.</p>
<h2>My advice</h2>
<p>If you are prepared, you will save yourself a lot of time.  If you are late or too slow, you will probably find yourself with a lot more work, e.g. <a href="/blog/your-drupal-website-has-backdoor">the rescue workflow for Drupalgeddon 1</a>.</p>
<h3>Today</h3>
<p>Don't skimp on the first two.  And do at least one of "3. Update a contrib module" or "4. Learn how to apply patches".  Which one you choose depends on your skills and how out of date contrib modules are on your Drupal websites.  Ideally, do both steps 3 &amp; 4; You might find one of them is significantly challenging for you.</p>
<ol>
<li><strong>Backup your Drupal 7 websites</strong>; Database, code &amp; files directory</li>
<li>
        Plan to be online at <strong>1600 Wednesday 13 July 2016 UTC</strong>.  In other timezones:<br>
            America/Los_Angeles: 0900 Wednesday 13 Jul<br>
            America/New_York:    1200 Wednesday 13 Jul<br>
            Europe/London:       1700 Wednesday 13 Jul<br>
            Europe/Paris:        1800 Wednesday 13 Jul<br>
            Australia/Sydney:    0200 <strong>Thursday</strong>  14 Jul<br>
            Pacific/Auckland:    0400 <strong>Thursday</strong>  14 Jul
</li><li><strong>Update a contrib module</strong> on each of your Drupal 7 website(s) to make sure there will be no problems and you know how to do it.  Do it manually by downloading the module from Drupal.org.  The update server that Drush and Drupal use might be delayed, overloaded or under attack.</li>
<li>
        <strong>Learn how to apply patches:</strong>
<ol>
<li>Choose any popular module that your website uses, e.g. Views</li>
<li>Navigate to the module's issue queue</li>
<li>Filter for "Reviewed &amp; tested by the community"</li>
<li>Filter for the version of the module your website uses</li>
<li>E.g. <a href="https://www.drupal.org/project/issues/views?text=&amp;status=14&amp;priorities=All&amp;categories=All&amp;version=7.x-3.x-dev&amp;component=All">Views 7.3 RTBC issues</a></li>
<li>Open any issue</li>
<li>Download any <code>.patch</code> file</li>
<li>
                Apply it using <a href="https://www.drupal.org/patch/apply">Drupal's documentation</a>, which boils down to something like:
<ol>
<li><code>cd sites/all/modules/views/</code></li>
<li><code>patch -p1 &lt; ~/Downloads/views-fix_hide_rewriting_if_empty-1428256-21.patch</code></li>
<li>Test the patched module still works</li>
</ol>
</li>
</ol>
</li>
<li>Restore your website from the backup into a new environment to make sure your backup is complete, you have sufficient access and you know how to do it.  If you are on time and fast, this won't become necessary.  But just in case...</li>
<li>
        Subscribe to Drupal security email announcements: Log in on Drupal.org, go to your <a href="https://www.drupal.org/user">user profile page</a> and subscribe to the security newsletter on the "Edit Â» My newsletters" tab.
    </li>
<li>Consider taking servers that host highly sensitive data offline if your Drupal website can reach them.  Drupal's maintenance mode may not be sufficient protection.</li>
<li>If you can move to a <a href="https://www.drupal.org/hosting/enterprise">Drupal-tailored web host</a> easily, do so.  They often offer additional protection while you work on applying updates.  I usually recommend Pantheon.</li>
<li>Take stock of any modifications (patches) to Drupal core and contrib modules.  The <a href="https://www.drupal.org/project/hacked">Hacked!</a> module automates most of this.</li>
<li>Clean up and/or take stock of any unusual files in your website.  A version control system like git makes this easy.</li>
<li>Use the <a href="https://www.drupal.org/project/security_review">Security Review</a> module to check if you have configured your Drupal website securely.</li>
<li>Backup your website again if you made changes since the last backup.</li>
<li>
        Subscribe to my blog;
<ul>
<li>I will post any important or relevant updates, more aggressively than what the Drupal Security Team is able to</li>
<li>Submit your email address in the right sidebar.</li>
<li>You can unsubscribe anytime (I won't be offended)</li>
</ul>
</li>
</ol>
<h3>At T minus 1-hour</h3>
<p>At 1500 Wednesday 13 July 2016 UTC, an hour before the scheduled time;</p>
<p>Do what you need to do to have the next few hours free from distractions; I.e. eat, use the bathroom, get comfortable.</p>
<h3>At 1600 Wednesday 13 July 2016 UTC</h3>
<ol>
<li>Look for <a href="https://www.drupal.org/security/contrib">contrib security advisories on Drupal.org</a>.</li>
<li>
        For each advisory that is published, check if your website(s) use the module.  If yes, update it.
    </li>
<li>
        Check you are recieving security advisory emails.  Sometimes the highly critical updates require followup.
    </li>
</ol>
<h2>Drupal 6</h2>
<p>The Drupal security team no longer supports Drupal 6.  So we don't yet know if it is vulnerable or if there will be a patch.  All of the above applies and you should do it, but if Drupal 6 is vulnerable patches or updates will probably be provided by <a href="https://www.drupal.org/project/d6lts">the Drupal 6 long term support (LTS) programme</a>.</p>
<p>Worst case, be prepared to roll-back to your backup from before the announcement.</p>
<p>Consider also;</p>
<ol>
<li>Accellerating your plans to upgrade to Drupal 7 or 8</li>
<li>Taking your server or website offline</li>
<li><a href="https://www.drupal.org/node/27882">Archiving it as a static HTML website</a> (no PHP)</li>
<li>Maintenance mode or locked-down permissions to be read-only is better than nothing, but may not offer any protection</li>
</ol>
<h2>Will I be affected?</h2>
<p>The Drupal security team have added that the affected contrib modules are used on between 1,000 and 10,000 sites.  That limits the affected modules to those ranked <a href="https://www.drupal.org/project/usage?page=5">522</a> to <a href="https://www.drupal.org/project/usage?page=21">2180</a>; Just 1680 of the most popular 2000 Drupal contrib modules.  Some Drupal websites, especially simple ones, will be lucky in that they won't be using an affected contrib module.  But don't count on luck.</p>
  
